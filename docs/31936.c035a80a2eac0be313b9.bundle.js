"use strict";(self.webpackChunkKuiClientTemplate=self.webpackChunkKuiClientTemplate||[]).push([[31936],{68215:(e,n,t)=>{function o(e){return"IP"===e?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function a(e){return e.body.reduce(((e,n)=>(e[o(n.key)]=n.name,n.attributes.forEach((({key:n,value:t})=>{e[o(n)]=t})),e)),{})}t.d(n,{k:()=>o,Z:()=>a})},31936:(e,n,t)=>{t.r(n),t.d(n,{default:()=>De});var o=t(11227),a=t.n(o),i=t(23918),c=t(88342),r=t(62892),s=t(91119),u=t(25218),l=t(73258),d=t.n(l),m=t(68215);function p(e){return{apiVersion:"kui-shell/v1",kind:"DescriptionList",spec:{groups:Object.keys(e).map((n=>({term:n,description:e[n]?e[n].toString():null===e[n]?"null":""})))}}}function f(e){return e.matchLabels?Object.keys(e.matchLabels).map((n=>`${n}=${e.matchLabels[n]}`)).join(", "):""}var h=t(58853),g=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};function b({metadata:e},n=new Date){return d()(("string"==typeof n?new Date(n):n).getTime()-new Date(e.creationTimestamp).getTime())}function v(e){const{readyReplicas:n,replicas:t}=e.status;return`${n||0}/${t}`}const y=(0,s.i18n)("plugin-kubectl","events");var k=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};const w=a()("plugin-kubectl/view/modes/Summary");var $=t(26430);const P=(0,s.i18n)("plugin-kubectl");function R(e,n){const t=n.status.addresses.find((n=>n.type===e));return t?t.address:"<none>"}function x(e){try{return parseInt(e)}catch(n){return e}}function C(e,{status:n}){return P("percentFree",$.ZP.fractionOfMemory(n.allocatable[e],n.capacity[e]))}function j(e){const{containerStatuses:n}=e.status;return`${n?n.reduce(((e,n)=>e+(n.ready?1:0)),0):0}/${n.length}`}function O(e){const{containerStatuses:n}=e.status;return n.reduce(((e,n)=>e+n.restartCount),0)}function S(e){return e.spec.readinessGates?e.spec.readinessGates.map((e=>e.conditionType||"")).join(", "):"<none>"}var E=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};const T=(0,s.i18n)("plugin-kubectl");const I={when:u.l7,mode:{mode:"summary",label:T("summary"),content:function({REPL:e},n){return E(this,void 0,void 0,(function*(){try{return(0,u.xS)(n)?n.summary:(0,u.th)(n)?function(e){const{spec:n,status:t}=e;return p({Ready:j(e),Status:t.phase,Restarts:O(e),Age:b(e),IP:t.podIP,Node:n.nodeName,"Nominated node":n.nominatedNodeName||"<none>","Readiness gates":S(e)})}(n):(0,u.Yc)(n)?function(e){const{spec:n,status:t}=e,{template:{spec:{containers:o}}}=n;return p({Ready:v(e),"Up-to-date":t.readyReplicas||0,Available:t.availableReplicas||0,Age:b(e),Containers:o.map((e=>e.name)).join(", "),Images:o.map((e=>e.image)).join(", "),Selector:f(n.selector)})}(n):(0,u.MN)(n)?function(e){const{spec:n,status:t}=e,{template:{spec:{containers:o}}}=n;return p({Desired:t.replicas,Current:t.availableReplicas,Ready:t.readyReplicas,Age:b(e),Containers:o.map((e=>e.name)).join(", "),Images:o.map((e=>e.image)).join(", "),Selector:f(n.selector)})}(n):(0,u.cO)(n)?function(e){const{involvedObject:n,source:t,reason:o,type:a,message:i,firstTimestamp:c,lastTimestamp:r,count:s}=e;return p({"Last seen":y("ago",d()(Date.now()-new Date(r).getTime())),Object:`${n.kind}/${n.name}`,Message:i,Type:a,Reason:o,Subobject:n.fieldPath,Source:`${t.component||""}${t.host?(t.component?", ":"")+t.host:""}`,"First seen":y("ago",d()(Date.now()-new Date(c).getTime())),Count:s})}(n):(0,u.UG)(n)?function(e){const{metadata:n,status:t}=e;return p({Name:n.name,Age:b(e),CPUs:x(t.capacity.cpu),Memory:$.ZP.reformatAsBytes(t.capacity.memory)+` (${C("memory",e)})`,"Ephemeral Storage":$.ZP.reformatAsBytes(t.capacity["ephemeral-storage"])+` (${C("ephemeral-storage",e)})`,"External IP":R("ExternalIP",e),"Internal IP":R("InternalIP",e),"OS Image":t.nodeInfo.osImage,"Kernel Version":t.nodeInfo.kernelVersion,"Container Runtime":t.nodeInfo.containerRuntimeVersion})}(n):(0,u.ko)(n)?function(e){const{metadata:n,type:t}=e;return p({Name:n.name,Type:t,Age:b(e)})}(n):(0,u.Cr)(n)?function(e){const{metadata:n,spec:t,status:o}=e,{containers:a}=t.template.spec;return p({Name:n.name,Completions:`${o.succeeded}/${t.completions}`,Duration:b(e,o.completionTime),Age:b(e),Containers:a.map((e=>e.image)).join(", "),Selector:f(t.selector)})}(n):(0,u.me)(n)?function(e,n){return k(this,void 0,void 0,(function*(){const{metadata:t,status:o}=e,a={Name:t.name,Status:o.phase,Age:b(e)};try{const t=yield n.qexec((0,h.QG)(e.originatingCommand,`kubectl get quota -n ${e.metadata.name}`));if((0,s.isTable)(t)&&t.body.length>=1){const e=t.body.map((e=>(0,m.Z)({body:[e]})));Object.assign(a,{quota:e})}}catch(e){w("no quota found")}return p(a)}))}(n,e):function(e,n){return g(this,void 0,void 0,(function*(){const t=(0,h.QG)(e.originatingCommand,`kubectl get ${e.kind} ${e.metadata.name} -n ${e.metadata.namespace} -o wide`);return p((0,m.Z)(yield n.qexec(t)))}))}(n,e)}catch(e){return 404===e.code?T("This resource has been deleted"):(console.error(e),{content:n.kuiRawData,contentType:"yaml"})}}))},defaultMode:!0,order:-999}};var N=t(53450),D=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};const L=(0,s.i18n)("plugin-kubectl");function V(e,n,t){return D(this,void 0,void 0,(function*(){return`${(0,N.fY)(t)} get ${(0,N.kJ)(n.apiVersion,(0,s.encodeComponent)(n.kind),(0,s.encodeComponent)(n.metadata.name),(0,s.encodeComponent)(n.metadata.namespace||(yield(0,N.Yi)(e))))}`}))}const Y={when:u.MP,mode:{mode:"show-crd-resources",label:L("Show Resources"),command:V,kind:"drilldown"}};var Z=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};const A=(0,s.i18n)("plugin-kubectl"),M=a()("plugin-kubectl/view/modes/crd-summary");const q={when:u.MP,mode:{mode:"summary",label:A("summary"),content:function(e,n,o){return Z(this,void 0,void 0,(function*(){const{group:a,version:i,scope:c}=n.spec,r=n.spec.names.kind,s=c?{Scope:c}:{},u=a?{Group:a}:{},l=i?{Version:i}:{},d=r?{Kind:r}:{},m=Object.assign({},s,u,l,d),p=t.e(1272).then(t.bind(t,1272));try{const{body:t}=yield e.REPL.qexec(`${V(e,n,o)} -o custom-columns=NAME:.metadata.name`);m["Resource count"]=t.length}catch(e){M("error fetching resource count for crd",e)}return{content:(yield p).dump(m),contentType:"yaml"}}))},priority:10}};var B=t(50816),G=t(88363),J=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};const K=(0,s.i18n)("plugin-kubectl");function F(e,n,t){const o=`${(0,B.fY)(t)} get ${(0,G.uE)(n)} -o wide`;return e.REPL.qexec(o).then(m.Z)}const U={when:u.O,mode:{mode:"summary",label:K("summary"),content:function(e,n,o){return J(this,void 0,void 0,(function*(){const[a,{dump:i}]=yield Promise.all([F(e,n,o),t.e(1272).then(t.bind(t,1272))]);if(n.data){delete a.Data;try{for(const e in n.data)"string"==typeof n.data[e]&&(a[e]=n.data[e])}catch(e){console.error("error parsing configmap data",e)}}return{content:i(a),contentType:"yaml"}}))},priority:10}};var Q=t(67294);const z="logs";var W=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};const _=Q.lazy((()=>Promise.all([t.e(12320),t.e(11316)]).then(t.bind(t,11316)))),H=(0,s.i18n)("plugin-kubectl","logs");const X={when:e=>(0,u.th)(e)||(0,u.Yc)(e)||(0,u.MN)(e),mode:{mode:z,label:H("Logs"),content:function(e,n,t){return W(this,void 0,void 0,(function*(){return{react:function(o){return Q.createElement(_,{tab:e,mode:z,resource:n,args:t,toolbarController:o})}}}))}}};var ee=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};const ne=Q.lazy((()=>Promise.all([t.e(12320),t.e(79194)]).then(t.bind(t,79194)))),te="terminal";const oe={when:e=>(0,u.th)(e)&&!e.isSimulacrum,mode:{mode:te,label:"Terminal",content:function(e,n,t){return ee(this,void 0,void 0,(function*(){return{react:function(o){return Q.createElement(ne,{tab:e,mode:te,resource:n,args:t,toolbarController:o})}}}))}}};var ae=t(89525);const ie=(0,s.i18n)("plugin-kubectl");const ce={when:u.k1,mode:{mode:"ownerReference",kind:"drilldown",showRelatedResource:!0,label:ie("Show Owner Reference"),command:function(e,{metadata:{namespace:n,ownerReferences:[{apiVersion:t,kind:o,name:a}]}},i){return`${(0,B.fY)(i)} get ${(0,G.kJ)(t,(0,s.encodeComponent)(o),(0,s.encodeComponent)(a),(0,s.encodeComponent)(n||"default"))} -o yaml`}}},re=(0,s.i18n)("plugin-kubectl");const se={when:u.th,mode:{mode:"show-node",kind:"drilldown",showRelatedResource:!0,label:re("Show Node"),command:function(e,n,t){return`${(0,B.fY)(t)} get node ${n.spec.nodeName} -o yaml`}}};var ue=t(48026);const le=(0,s.i18n)("plugin-kubectl");const de={icon:Q.createElement(ue.PJ,{icon:"Trash"}),mode:"delete",order:100,label:le("deleteResource"),kind:"drilldown",command:function(e,n,t){return`${(0,B.fY)(t)} delete ${(0,G.uE)(n)}`},confirm:!0},me={when:u.Rt,mode:de};var pe=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};const fe=(0,s.i18n)("plugin-kubectl");const he={when:u._E,mode:{mode:"involvedObject",label:fe("Show Involved Object"),showRelatedResource:!0,command:function(e,{involvedObject:{apiVersion:n,kind:t,name:o,namespace:a}},i){return pe(this,void 0,void 0,(function*(){return`${(0,N.fY)(i)} get ${(0,G.kJ)(n,(0,s.encodeComponent)(t),(0,s.encodeComponent)(o),(0,s.encodeComponent)(a||(yield(0,N.Yi)(e))))} -o yaml`}))},kind:"drilldown"}};var ge=t(70764);const be={when:function(e){return(0,N.Rt)(e)&&!(0,ge.jK)(e)},mode:{mode:"edit-button",label:(0,s.i18n)("plugin-client-common","editor")("Edit"),icon:Q.createElement(ue.PJ,{icon:"Edit"}),inPlace:!0,kind:"drilldown",command:(e,n,t)=>`${(0,N.fY)(t)} edit ${(0,N.uE)(n)}`}};var ve=t(40881),ye=t(84323);const ke={when:function(e){return(0,u.Rt)(e)&&!(0,u.cO)(e)&&(0,u.ri)(e)},mode:{mode:"events",label:(0,s.i18n)("plugin-kubectl")("Show Events"),kind:"drilldown",showRelatedResource:!0,command:function(e,n,t){const o=`involvedObject.apiVersion=${n.apiVersion},involvedObject.kind=${n.kind},involvedObject.name=${n.metadata.name},involvedObject.namespace=${n.metadata.namespace}`,a=[(0,B.fY)(t),"get","events","--field-selector",o,"-n",n.metadata.namespace,"-w"];return(0,h.QG)(t,a.join(" "))}}},we={when:u.cO,badge:e=>{const n=ve.Z[e.reason];return{title:n?e.reason:e.type,css:n||("Error"===e.type?ye.Z.Red:"Warning"===e.type?ye.Z.Yellow:void 0)}}},$e=(0,s.i18n)("plugin-kubectl");const Pe={when:u.w2,mode:{mode:"annotations",label:$e("Annotations"),content:function(e,n){return{apiVersion:"kui-shell/v1",kind:"DescriptionList",spec:{groups:Object.keys(n.metadata.annotations).filter((e=>"kubectl.kubernetes.io/last-applied-configuration"!==e&&n.metadata.annotations[e].length>0)).sort(((e,n)=>e.length-n.length)).map((e=>({term:e,description:n.metadata.annotations[e]})))}}}}},Re=(0,s.i18n)("plugin-kubectl");const xe={when:u.o2,mode:{mode:"labels",label:Re("Labels"),content:function(e,n){return{apiVersion:"kui-shell/v1",kind:"DescriptionList",spec:{as:"labels",groups:Object.keys(n.metadata.labels).filter((e=>n.metadata.labels[e].length>0)).sort(((e,n)=>e.length-n.length)).map((e=>({term:e,description:n.metadata.labels[e]})))}}}}};var Ce=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};function je(e,n,t){return Ce(this,void 0,void 0,(function*(){return(yield e.REPL.qexec(n,void 0,void 0,{raw:!0})).split(/[\n\r]/).map((e=>e.replace(/^\w+\//,""))).filter((e=>e.startsWith(t.toBeCompleted))).map((e=>e.substring(t.toBeCompleted.length)))}))}function Oe(e,n=(()=>!0)){const t=e.parsedOptions;return Object.keys(t).filter(n).filter((e=>!/^(-o|--output)/.test(e))).map((e=>`${1===e.length?`-${e}`:`--${e}`} ${t[e]}`)).join(" ")}function Se(e){return"attach"===e||"exec"===e||"logs"===e}function Ee(e){return"cordon"===e||"uncordon"===e||"drain"===e||"taint"===e}function Te(e,n,t){return Ce(this,void 0,void 0,(function*(){const{argvNoOptions:o,argv:a,parsedOptions:i}=n,c=(0,B.fY)({argvNoOptions:o}),r=-1===t.toBeCompletedIdx?n.argv.length-1:t.toBeCompletedIdx-1,s=o[1];if(r>0&&("-n"===a[r]||"--namespace"===a[r])){const o=`${c} get ns ${Oe(n,(e=>"-n"!==e&&"--namespace"!==e))} -o name`;return je(e,o,t)}if(("kubectl"===o[0]||"k"===o[0]||"oc"===o[0])&&!/^-/.test(a[r])&&("get"===s||"annotate"===s||"describe"===s||"pod"===s||"edit"===s||"label"===s||Se(s)||Ee(s)||"delete"===s&&!i.f&&!i.file)){const a=`${c} get ${Se(s)?"pod":Ee(s)?"node":o[2]} ${Oe(n)} -o name`;return je(e,a,t)}}))}var Ie=t(73423),Ne=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}s((o=o.apply(e,n||[])).next())}))};const De=e=>Ne(void 0,void 0,void 0,(function*(){(0,i.Z)();const n=e.registerModes(c.ZP,r.ZP,I,q,U,Pe,xe,ke,X,oe,ae.ZP,be,Y,ce,se,me,he),t=e.registerBadges(we);Ie.notebookVFS.mkdir({argvNoOptions:["mkdir","/kui/kubernetes"]}),Ie.notebookVFS.cp(void 0,["plugin://plugin-kubectl/notebooks/knative-getting-started.md","plugin://plugin-kubectl/notebooks/knative-first-service.md","plugin://plugin-kubectl/notebooks/knative-first-autoscale.md","plugin://plugin-kubectl/notebooks/create-jobs.md","plugin://plugin-kubectl/notebooks/create-jobs.json","plugin://plugin-kubectl/notebooks/crud-operations.md","plugin://plugin-kubectl/notebooks/crud-operations.json","plugin://plugin-kubectl/notebooks/dashboard1.md","plugin://plugin-kubectl/notebooks/deploy-applications.md","plugin://plugin-kubectl/notebooks/deploy-applications.json"],"/kui/kubernetes/");try{(0,s.registerTabCompletionEnumerator)(Te)}catch(e){a()("plugins/kubeui/preload")("error installing kubeui tab-completion extensions",e)}yield Promise.all([n,t])}))}}]);