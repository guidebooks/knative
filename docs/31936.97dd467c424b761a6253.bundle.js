"use strict";(self.webpackChunkKuiClientTemplate=self.webpackChunkKuiClientTemplate||[]).push([[31936],{68215:(e,n,t)=>{function o(e){return"IP"===e?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function i(e){return e.body.reduce(((e,n)=>(e[o(n.key)]=n.name,n.attributes.forEach((({key:n,value:t})=>{e[o(n)]=t})),e)),{})}t.d(n,{k:()=>o,Z:()=>i})},31936:(e,n,t)=>{t.r(n),t.d(n,{default:()=>De});var o=t(11227),i=t.n(o),a=t(23918),c=t(64952),r=t(62892),u=t(91119),s=t(25218),l=t(73258),d=t.n(l),m=t(68215);function p(e){return{apiVersion:"kui-shell/v1",kind:"DescriptionList",spec:{groups:Object.keys(e).map((n=>({term:n,description:e[n]?e[n].toString():null===e[n]?"null":""})))}}}function f(e){return e.matchLabels?Object.keys(e.matchLabels).map((n=>`${n}=${e.matchLabels[n]}`)).join(", "):""}var g=t(58853),b=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};function h({metadata:e},n=new Date){return d()(("string"==typeof n?new Date(n):n).getTime()-new Date(e.creationTimestamp).getTime())}function v(e){const{readyReplicas:n,replicas:t}=e.status;return`${n||0}/${t}`}const k=(0,u.i18n)("plugin-kubectl","events");var y=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const w=i()("plugin-kubectl/view/modes/Summary");var $=t(26430);const P=(0,u.i18n)("plugin-kubectl");function R(e,n){const t=n.status.addresses.find((n=>n.type===e));return t?t.address:"<none>"}function x(e){try{return parseInt(e)}catch(n){return e}}function C(e,{status:n}){return P("percentFree",$.ZP.fractionOfMemory(n.allocatable[e],n.capacity[e]))}function j(e){const{containerStatuses:n}=e.status;return`${n?n.reduce(((e,n)=>e+(n.ready?1:0)),0):0}/${n.length}`}function O(e){const{containerStatuses:n}=e.status;return n.reduce(((e,n)=>e+n.restartCount),0)}function S(e){return e.spec.readinessGates?e.spec.readinessGates.map((e=>e.conditionType||"")).join(", "):"<none>"}var E=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const T=(0,u.i18n)("plugin-kubectl");const I={when:s.l7,mode:{mode:"summary",label:T("summary"),content:function({REPL:e},n){return E(this,void 0,void 0,(function*(){try{return(0,s.xS)(n)?n.summary:(0,s.th)(n)?function(e){const{spec:n,status:t}=e;return p({Ready:j(e),Status:t.phase,Restarts:O(e),Age:h(e),IP:t.podIP,Node:n.nodeName,"Nominated node":n.nominatedNodeName||"<none>","Readiness gates":S(e)})}(n):(0,s.Yc)(n)?function(e){const{spec:n,status:t}=e,{template:{spec:{containers:o}}}=n;return p({Ready:v(e),"Up-to-date":t.readyReplicas||0,Available:t.availableReplicas||0,Age:h(e),Containers:o.map((e=>e.name)).join(", "),Images:o.map((e=>e.image)).join(", "),Selector:f(n.selector)})}(n):(0,s.MN)(n)?function(e){const{spec:n,status:t}=e,{template:{spec:{containers:o}}}=n;return p({Desired:t.replicas,Current:t.availableReplicas,Ready:t.readyReplicas,Age:h(e),Containers:o.map((e=>e.name)).join(", "),Images:o.map((e=>e.image)).join(", "),Selector:f(n.selector)})}(n):(0,s.cO)(n)?function(e){const{involvedObject:n,source:t,reason:o,type:i,message:a,firstTimestamp:c,lastTimestamp:r,count:u}=e;return p({"Last seen":k("ago",d()(Date.now()-new Date(r).getTime())),Object:`${n.kind}/${n.name}`,Message:a,Type:i,Reason:o,Subobject:n.fieldPath,Source:`${t.component||""}${t.host?(t.component?", ":"")+t.host:""}`,"First seen":k("ago",d()(Date.now()-new Date(c).getTime())),Count:u})}(n):(0,s.UG)(n)?function(e){const{metadata:n,status:t}=e;return p({Name:n.name,Age:h(e),CPUs:x(t.capacity.cpu),Memory:$.ZP.reformatAsBytes(t.capacity.memory)+` (${C("memory",e)})`,"Ephemeral Storage":$.ZP.reformatAsBytes(t.capacity["ephemeral-storage"])+` (${C("ephemeral-storage",e)})`,"External IP":R("ExternalIP",e),"Internal IP":R("InternalIP",e),"OS Image":t.nodeInfo.osImage,"Kernel Version":t.nodeInfo.kernelVersion,"Container Runtime":t.nodeInfo.containerRuntimeVersion})}(n):(0,s.ko)(n)?function(e){const{metadata:n,type:t}=e;return p({Name:n.name,Type:t,Age:h(e)})}(n):(0,s.Cr)(n)?function(e){const{metadata:n,spec:t,status:o}=e,{containers:i}=t.template.spec;return p({Name:n.name,Completions:`${o.succeeded}/${t.completions}`,Duration:h(e,o.completionTime),Age:h(e),Containers:i.map((e=>e.image)).join(", "),Selector:f(t.selector)})}(n):(0,s.me)(n)?function(e,n){return y(this,void 0,void 0,(function*(){const{metadata:t,status:o}=e,i={Name:t.name,Status:o.phase,Age:h(e)};try{const t=yield n.qexec((0,g.QG)(e.originatingCommand,`kubectl get quota -n ${e.metadata.name}`));if((0,u.isTable)(t)&&t.body.length>=1){const e=t.body.map((e=>(0,m.Z)({body:[e]})));Object.assign(i,{quota:e})}}catch(e){w("no quota found")}return p(i)}))}(n,e):function(e,n){return b(this,void 0,void 0,(function*(){const t=(0,g.QG)(e.originatingCommand,`kubectl get ${e.kind} ${e.metadata.name} -n ${e.metadata.namespace} -o wide`);return p((0,m.Z)(yield n.qexec(t)))}))}(n,e)}catch(e){return 404===e.code?T("This resource has been deleted"):(console.error(e),{content:n.kuiRawData,contentType:"yaml"})}}))},defaultMode:!0,order:-999}};var N=t(53450),D=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const L=(0,u.i18n)("plugin-kubectl");function V(e,n,t){return D(this,void 0,void 0,(function*(){return`${(0,N.fY)(t)} get ${(0,N.kJ)(n.apiVersion,(0,u.encodeComponent)(n.kind),(0,u.encodeComponent)(n.metadata.name),(0,u.encodeComponent)(n.metadata.namespace||(yield(0,N.Yi)(e))))}`}))}const Y={when:s.MP,mode:{mode:"show-crd-resources",label:L("Show Resources"),command:V,kind:"drilldown"}};var Z=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const A=(0,u.i18n)("plugin-kubectl"),q=i()("plugin-kubectl/view/modes/crd-summary");const M={when:s.MP,mode:{mode:"summary",label:A("summary"),content:function(e,n,o){return Z(this,void 0,void 0,(function*(){const{group:i,version:a,scope:c}=n.spec,r=n.spec.names.kind,u=c?{Scope:c}:{},s=i?{Group:i}:{},l=a?{Version:a}:{},d=r?{Kind:r}:{},m=Object.assign({},u,s,l,d),p=t.e(1272).then(t.bind(t,1272));try{const{body:t}=yield e.REPL.qexec(`${V(e,n,o)} -o custom-columns=NAME:.metadata.name`);m["Resource count"]=t.length}catch(e){q("error fetching resource count for crd",e)}return{content:(yield p).dump(m),contentType:"yaml"}}))},priority:10}};var B=t(50816),G=t(88363),J=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const K=(0,u.i18n)("plugin-kubectl");function F(e,n,t){const o=`${(0,B.fY)(t)} get ${(0,G.uE)(n)} -o wide`;return e.REPL.qexec(o).then(m.Z)}const U={when:s.O,mode:{mode:"summary",label:K("summary"),content:function(e,n,o){return J(this,void 0,void 0,(function*(){const[i,{dump:a}]=yield Promise.all([F(e,n,o),t.e(1272).then(t.bind(t,1272))]);if(n.data){delete i.Data;try{for(const e in n.data)"string"==typeof n.data[e]&&(i[e]=n.data[e])}catch(e){console.error("error parsing configmap data",e)}}return{content:a(i),contentType:"yaml"}}))},priority:10}};var Q=t(67294);const z="logs";var W=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const _=Q.lazy((()=>Promise.all([t.e(12320),t.e(11316)]).then(t.bind(t,11316)))),H=(0,u.i18n)("plugin-kubectl","logs");const X={when:e=>(0,s.th)(e)||(0,s.Yc)(e)||(0,s.MN)(e),mode:{mode:z,label:H("Logs"),content:function(e,n,t){return W(this,void 0,void 0,(function*(){return{react:function(o){return Q.createElement(_,{tab:e,mode:z,resource:n,args:t,toolbarController:o})}}}))}}};var ee=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const ne=Q.lazy((()=>Promise.all([t.e(12320),t.e(79194)]).then(t.bind(t,79194)))),te="terminal";const oe={when:e=>(0,s.th)(e)&&!e.isSimulacrum,mode:{mode:te,label:"Terminal",content:function(e,n,t){return ee(this,void 0,void 0,(function*(){return{react:function(o){return Q.createElement(ne,{tab:e,mode:te,resource:n,args:t,toolbarController:o})}}}))}}};var ie=t(89525);const ae=(0,u.i18n)("plugin-kubectl");const ce={when:s.k1,mode:{mode:"ownerReference",kind:"drilldown",showRelatedResource:!0,label:ae("Show Owner Reference"),command:function(e,{metadata:{namespace:n,ownerReferences:[{apiVersion:t,kind:o,name:i}]}},a){return`${(0,B.fY)(a)} get ${(0,G.kJ)(t,(0,u.encodeComponent)(o),(0,u.encodeComponent)(i),(0,u.encodeComponent)(n||"default"))} -o yaml`}}},re=(0,u.i18n)("plugin-kubectl");const ue={when:s.th,mode:{mode:"show-node",kind:"drilldown",showRelatedResource:!0,label:re("Show Node"),command:function(e,n,t){return`${(0,B.fY)(t)} get node ${n.spec.nodeName} -o yaml`}}};var se=t(48540);const le=(0,u.i18n)("plugin-kubectl");const de={icon:Q.createElement(se.PJ,{icon:"Trash"}),mode:"delete",order:100,label:le("deleteResource"),kind:"drilldown",command:function(e,n,t){return`${(0,B.fY)(t)} delete ${(0,G.uE)(n)}`},confirm:!0},me={when:s.Rt,mode:de};var pe=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const fe=(0,u.i18n)("plugin-kubectl");const ge={when:s._E,mode:{mode:"involvedObject",label:fe("Show Involved Object"),showRelatedResource:!0,command:function(e,{involvedObject:{apiVersion:n,kind:t,name:o,namespace:i}},a){return pe(this,void 0,void 0,(function*(){return`${(0,N.fY)(a)} get ${(0,G.kJ)(n,(0,u.encodeComponent)(t),(0,u.encodeComponent)(o),(0,u.encodeComponent)(i||(yield(0,N.Yi)(e))))} -o yaml`}))},kind:"drilldown"}};var be=t(70764);const he={when:function(e){return(0,N.Rt)(e)&&!(0,be.jK)(e)},mode:{mode:"edit-button",label:(0,u.i18n)("plugin-client-common","editor")("Edit"),icon:Q.createElement(se.PJ,{icon:"Edit"}),inPlace:!0,kind:"drilldown",command:(e,n,t)=>`${(0,N.fY)(t)} edit ${(0,N.uE)(n)}`}};var ve=t(40881),ke=t(84323);const ye={when:function(e){return(0,s.Rt)(e)&&!(0,s.cO)(e)&&(0,s.ri)(e)},mode:{mode:"events",label:(0,u.i18n)("plugin-kubectl")("Show Events"),kind:"drilldown",showRelatedResource:!0,command:function(e,n,t){const o=`involvedObject.apiVersion=${n.apiVersion},involvedObject.kind=${n.kind},involvedObject.name=${n.metadata.name},involvedObject.namespace=${n.metadata.namespace}`,i=[(0,B.fY)(t),"get","events","--field-selector",o,"-n",n.metadata.namespace,"-w"];return(0,g.QG)(t,i.join(" "))}}},we={when:s.cO,badge:e=>{const n=ve.Z[e.reason];return{title:n?e.reason:e.type,css:n||("Error"===e.type?ke.Z.Red:"Warning"===e.type?ke.Z.Yellow:void 0)}}},$e=(0,u.i18n)("plugin-kubectl");const Pe={when:s.w2,mode:{mode:"annotations",label:$e("Annotations"),content:function(e,n){return{apiVersion:"kui-shell/v1",kind:"DescriptionList",spec:{groups:Object.keys(n.metadata.annotations).filter((e=>"kubectl.kubernetes.io/last-applied-configuration"!==e&&n.metadata.annotations[e].length>0)).sort(((e,n)=>e.length-n.length)).map((e=>({term:e,description:n.metadata.annotations[e]})))}}}}},Re=(0,u.i18n)("plugin-kubectl");const xe={when:s.o2,mode:{mode:"labels",label:Re("Labels"),content:function(e,n){return{apiVersion:"kui-shell/v1",kind:"DescriptionList",spec:{as:"labels",groups:Object.keys(n.metadata.labels).filter((e=>n.metadata.labels[e].length>0)).sort(((e,n)=>e.length-n.length)).map((e=>({term:e,description:n.metadata.labels[e]})))}}}}};var Ce=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};function je(e,n,t){return Ce(this,void 0,void 0,(function*(){return(yield e.REPL.qexec(n,void 0,void 0,{raw:!0})).split(/[\n\r]/).map((e=>e.replace(/^\w+\//,""))).filter((e=>e.startsWith(t.toBeCompleted))).map((e=>e.substring(t.toBeCompleted.length)))}))}function Oe(e,n=(()=>!0)){const t=e.parsedOptions;return Object.keys(t).filter(n).filter((e=>!/^(-o|--output)/.test(e))).map((e=>`${1===e.length?`-${e}`:`--${e}`} ${t[e]}`)).join(" ")}function Se(e){return"attach"===e||"exec"===e||"logs"===e}function Ee(e){return"cordon"===e||"uncordon"===e||"drain"===e||"taint"===e}function Te(e,n,t){return Ce(this,void 0,void 0,(function*(){const{argvNoOptions:o,argv:i,parsedOptions:a}=n,c=(0,B.fY)({argvNoOptions:o}),r=-1===t.toBeCompletedIdx?n.argv.length-1:t.toBeCompletedIdx-1,u=o[1];if(r>0&&("-n"===i[r]||"--namespace"===i[r])){const o=`${c} get ns ${Oe(n,(e=>"-n"!==e&&"--namespace"!==e))} -o name`;return je(e,o,t)}if(("kubectl"===o[0]||"k"===o[0]||"oc"===o[0])&&!/^-/.test(i[r])&&("get"===u||"annotate"===u||"describe"===u||"pod"===u||"edit"===u||"label"===u||Se(u)||Ee(u)||"delete"===u&&!a.f&&!a.file)){const i=`${c} get ${Se(u)?"pod":Ee(u)?"node":o[2]} ${Oe(n)} -o name`;return je(e,i,t)}}))}var Ie=t(73423),Ne=function(e,n,t,o){return new(t||(t=Promise))((function(i,a){function c(e){try{u(o.next(e))}catch(e){a(e)}}function r(e){try{u(o.throw(e))}catch(e){a(e)}}function u(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const De=e=>Ne(void 0,void 0,void 0,(function*(){(0,a.Z)();const n=e.registerModes(c.ZP,r.ZP,I,M,U,Pe,xe,ye,X,oe,ie.ZP,he,Y,ce,ue,me,ge),t=e.registerBadges(we);Ie.notebookVFS.mkdir({argvNoOptions:["mkdir","/kui/kubernetes"]}),Ie.notebookVFS.cp(void 0,["plugin://plugin-kubectl/notebooks/knative-what-is-it-good-for.md","plugin://plugin-kubectl/notebooks/knative-quickstart.md","plugin://plugin-kubectl/notebooks/knative-quickstart.json","plugin://plugin-kubectl/notebooks/knative-first-service.md","plugin://plugin-kubectl/notebooks/knative-first-autoscale.md","plugin://plugin-kubectl/notebooks/knative-traffic-splitting.md","plugin://plugin-kubectl/notebooks/knative-introducing-eventing.md","plugin://plugin-kubectl/notebooks/knative-eventing-components.md","plugin://plugin-kubectl/notebooks/knative-cloud-events-player.md","plugin://plugin-kubectl/notebooks/knative-first-trigger.md","plugin://plugin-kubectl/notebooks/knative-whats-next.md","plugin://plugin-kubectl/notebooks/create-jobs.md","plugin://plugin-kubectl/notebooks/create-jobs.json","plugin://plugin-kubectl/notebooks/crud-operations.md","plugin://plugin-kubectl/notebooks/crud-operations.json","plugin://plugin-kubectl/notebooks/dashboard1.md","plugin://plugin-kubectl/notebooks/deploy-applications.md","plugin://plugin-kubectl/notebooks/deploy-applications.json"],"/kui/kubernetes/");try{(0,u.registerTabCompletionEnumerator)(Te)}catch(e){i()("plugins/kubeui/preload")("error installing kubeui tab-completion extensions",e)}yield Promise.all([n,t])}))}}]);